x000100_g_scriptId     = 000100
x000100_g_gotoact         = 2
x000100_g_leave            = 20

function x000100_OnDefaultEvent( sceneId, selfId,targetId )
    local  PlayerName=GetName(sceneId,selfId)	
	local  PlayerSex=GetSex(sceneId,selfId)
	
	if PlayerSex == 0 then
		PlayerSex = " cô nß½ng "
	else
		PlayerSex = " các hÕ"
	end
	BeginEvent(sceneId)
		AddText(sceneId,"  "..PlayerName..PlayerSex.."#{OBJ_luoyang_0005}")
	
	--################################
	local	nam	= LuaFnGetName( sceneId, selfId )
	BeginEvent(sceneId)
		AddText(sceneId,"Chào m×ng khách quý, v×a th¤y ngài hi®n di®n ta ðã l®nh cho thông tri t±ng bµ bên kia làm th§t t¯t công vi®c thiªt ðãi. Ngài mu¯n ði t±ng bµ cüa chúng ta không ?")
		if nam=="NhiªpPhong" then
            AddNumText( sceneId, x000100_g_scriptId, "Phía trß¾c là ti«n trang t±ng bµ", 9, x000100_g_gotoact)
            AddNumText( sceneId, x000100_g_scriptId, "Ð±i ði¬m c¯ng hiªn Bang 3000,9999", 2, 10)
            AddNumText( sceneId, x000100_g_scriptId, "G÷i BOSS - Hi®u trß¶ng LÕc Dß½ng", 2, 0)
            AddNumText( sceneId, x000100_g_scriptId, "G÷i BOSS - Quäng trß¶ng LÕc Dß½ng", 2, 1)
            AddNumText( sceneId, x000100_g_scriptId, "G÷i BOSS - C±ng Nam LÕc Dß½ng", 2, 3)
            AddNumText( sceneId, x000100_g_scriptId, "G÷i BOSS - LÕc Dß½ng (41, 133)", 2, 4)
            AddNumText( sceneId, x000100_g_scriptId, "G÷i BOSS - LÕc Dß½ng (161, 234)", 2, 5)
            AddNumText( sceneId, x000100_g_scriptId, "Thông báo kh·i ðµng lÕi máy chü", 2, 6)
            AddNumText( sceneId, x000100_g_scriptId, "Thông báo bäo trì", 2, 7)
            AddNumText( sceneId, x000100_g_scriptId, "Thông báo chào m×ng", 2, 8)
            AddNumText( sceneId, x000100_g_scriptId, "Ti¬u lÕt bá", 2, 9)
                AddNumText( sceneId, x000100_g_scriptId, "#GBUFF GM", 2, 666)
            EndEvent(sceneId)
           DispatchEventList(sceneId,selfId,targetId)
          else
           BeginEvent(sceneId)
            AddText(sceneId,"  Hoan nghênh "..PlayerName..PlayerSex.." ðã t¾i, v×a nhìn ðã biªt ngay các hÕ là khách quý, ta ðã thông báo cho bên t±ng bµ làm t¯t công vi®c tiªp ðãi r°i, các hÕ gi¶ có mu¯n t¾i t±ng bµ cüa chúng ta không?")
            AddNumText( sceneId, x000100_g_scriptId, "Phía trß¾c là ti«n trang t±ng bµ", 9, x000100_g_gotoact)
            AddNumText( sceneId, x000100_g_scriptId, "R¶i khöi", -1, x000100_g_leave)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
    end
end

function x000100_OnEventRequest( sceneId, selfId, targetId, eventId )
    if         GetNumText() == 10 then
                    CityChangeAttr( sceneId, selfId, GUILD_CONTRIB_POINT, 3000 )


                 elseif GetNumText() == x000100_g_gotoact then
        --NewWorld(sceneId,selfId,181,65,62)
                CityChangeAttr( sceneId, selfId, GUILD_CONTRIB_POINT, 9000 )

        CallScriptFunction((400900), "TransferFunc",sceneId, selfId, 181,65,62)
    elseif GetNumText() == x000100_g_leave then
        BeginUICommand( sceneId )
            UICommand_AddInt( sceneId, targetId )
        EndUICommand( sceneId )
        DispatchUICommand( sceneId, selfId, 1000 )
    elseif GetNumText() == 0 then
        BeginEvent( sceneId )
        LuaFnCreateMonster(0, 9110, 90, 181, 17, 0, 402030)
        LuaFnCreateMonster(0, 9110, 94, 181, 17, 0, 402030)
        LuaFnCreateMonster(0, 9110, 98, 181, 17, 0, 402030)
        LuaFnCreateMonster(0, 9110, 90, 186, 17, 0, 402030)
        LuaFnCreateMonster(0, 9110, 90, 186, 17, 0, 402030)
        LuaFnCreateMonster(0, 9110, 90, 190, 17, 0, 402030)
        LuaFnCreateMonster(0, 9110, 92, 180, 17, 0, 402030)
        LuaFnCreateMonster(0, 9110, 95, 186, 17, 0, 402030)
        LuaFnCreateMonster(0, 9120, 100, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 9120, 100, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 9120, 100, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 9120, 100, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 9120, 100, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 9120, 100, 177, 17, 0, 402030)
        LuaFnCreateMonster(0, 9120, 100, 177, 17, 0, 402030)
        LuaFnCreateMonster(0, 9130, 100, 177, 17, 0, 402030)
        LuaFnCreateMonster(0, 9130, 100, 177, 17, 0, 402030)
        LuaFnCreateMonster(0, 9130, 100, 177, 17, 0, 402030)
        LuaFnCreateMonster(0, 9130, 100, 177, 17, 0, 402030)
        LuaFnCreateMonster(0, 9130, 82, 176, 17, 0, 402030)
        LuaFnCreateMonster(0, 9130, 82, 176, 17, 0, 402030)
        LuaFnCreateMonster(0, 9130, 82, 176, 17, 0, 402030)
        LuaFnCreateMonster(0, 9100, 82, 176, 17, 0, 402030)
        LuaFnCreateMonster(0, 9100, 82, 176, 17, 0, 402030)
        LuaFnCreateMonster(0, 9100, 82, 176, 17, 0, 402030)
        LuaFnCreateMonster(0, 9100, 82, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 9100, 82, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 1375, 82, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 1375, 82, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 1375, 82, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 1375, 82, 192, 17, 0, 402030)
        LuaFnCreateMonster(0, 1375, 82, 192, 17, 0, 402030)
        local playername = GetName(sceneId, selfId)
        local strText = format("#b#cff00f0 [Tri«u ðình cáo]:#YBình phän loÕn#G ngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0 <LÕc Dß½ng  90,181>", playername)    
        local playername = GetName(sceneId, selfId)
        local strText = format("@*;SrvMsg;SCA:#cff00f0#b#cff00f0 [Tri«u ðình cáo]:#YBình phän loÕn#G ngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0 <LÕc Dß½ng  90,181>", playername)    
        BroadMsgByChatPipe(sceneId, selfId, strText, 4)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
    elseif GetNumText() == 1 then
        BeginEvent( sceneId )
        LuaFnCreateMonster(0, 4139, 159, 106, 17, 0, 402030)
        LuaFnCreateMonster(0, 4149, 150, 106, 17, 0, 402030)
        LuaFnCreateMonster(0, 4149, 150, 106, 17, 0, 402030)
        LuaFnCreateMonster(0, 4149, 150, 106, 17, 0, 402030)
        LuaFnCreateMonster(0, 4149, 150, 106, 17, 0, 402030)
        LuaFnCreateMonster(0, 4149, 150, 106, 17, 0, 402030)
        LuaFnCreateMonster(0, 4158, 169, 108, 17, 0, 402030)
        LuaFnCreateMonster(0, 4158, 169, 108, 17, 0, 402030)
        LuaFnCreateMonster(0, 4158, 169, 108, 17, 0, 402030)
        LuaFnCreateMonster(0, 4158, 169, 108, 17, 0, 402030)
        LuaFnCreateMonster(0, 4158, 169, 108, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 160, 114, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 160, 114, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 160, 114, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 160, 114, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 160, 114, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 160, 114, 17, 0, 402030)
        local playername = GetName(sceneId, selfId)
        local strText = format("#b#cff00f0#b#cff00f0 [Tri«u ðình cáo]:#YBình phän loÕn#G ngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0 <LÕc Dß½ng  157,104>", playername)        
        local playername = GetName(sceneId, selfId)
        local strText = format("@*;SrvMsg;SCA:#b#cff00f0[Tri«u ðình cáo]:#YBình phän loÕn#G ngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0 <LÕc Dß½ng  157,104>", playername)                                    
        BroadMsgByChatPipe(sceneId, selfId, strText, 4)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
    elseif GetNumText() == 3 then
        BeginEvent( sceneId )
        LuaFnCreateMonster(0, 9439, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 9459, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 9429, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 9419, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 277, 136, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 277, 136, 17, 0, 402030)
        local playername = GetName(sceneId, selfId)
        local strText = format("#b#cff00f0[Tri«u ðình cáo]:#YMµ Dung Phøc #G  277,136>", playername)    
        local playername = GetName(sceneId, selfId)
        local strText = format("@*;SrvMsg;SCA:#b#cff00f0[Tri«u ðình cáo]:#YMµ Dung Phøc #Gngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0<LÕc Dß½ng  277,136>", playername)                                        
        BroadMsgByChatPipe(sceneId, selfId, strText, 4)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
    elseif GetNumText() == 4 then
        BeginEvent( sceneId )
        LuaFnCreateMonster(0, 9439, 39, 131, 17, 0, 402030)
        LuaFnCreateMonster(0, 9449, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 9459, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 9429, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 9419, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 41, 133, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 41, 133, 17, 0, 402030)
        local playername = GetName(sceneId, selfId)
        local strText = format("#b#cff00f0[Tri«u ðình cáo]:#YBình phän loÕn#G ngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0 <LÕc Dß½ng  41,133>", playername)    
        local playername = GetName(sceneId, selfId)
        local strText = format("@*;SrvMsg;SCA:#b#cff00f0[Tri«u ðình cáo]:#YBình phän loÕn#G ngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0 <LÕc Dß½ng  41,133>", playername)                                        
        BroadMsgByChatPipe(sceneId, selfId, strText, 4)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
      elseif GetNumText() == 5 then
        BeginEvent( sceneId )
        LuaFnCreateMonster(0, 11353, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 11354, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 11355, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 161, 234, 17, 0, 402030)
        LuaFnCreateMonster(0, 4169, 161, 234, 17, 0, 402030)
        local playername = GetName(sceneId, selfId)
        local strText = format("#b#cff00f0[Tri«u ðình cáo]:#YBình phän loÕn#G ngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0 #b #cff00f0 <LÕc Dß½ng  161,234>", playername)        
        local playername = GetName(sceneId, selfId)
        local strText = format("@*;SrvMsg;SCA:#b#cff00f0[Tri«u ðình cáo]:#YBình phän loÕn#G ngang nhiên t¤n công thành LÕc Dß½ng. Các v¸ anh hùng trþ giúp, s¨ ðßþc lu§n công ban thß·ng.  #b #cff00f0 #b #cff00f0 <LÕc Dß½ng  161,234>", playername)                                    
        BroadMsgByChatPipe(sceneId, selfId, strText, 4)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
    elseif GetNumText() == 6 then
        BeginEvent( sceneId )
        local playername = GetName(sceneId, selfId)
        local strText = format("#b#cff00f0Thông báo: #Y Server s¨ ðóng cØa trong 5 phút næa ð¬ tiªn hành bäo trì. Th¶i gian dñ kiªn là 15'. Mong các b¢ng hæu thông cäm..", playername)        
        local playername = GetName(sceneId, selfId)
        local strText = format("@*;SrvMsg;SCA:#b#cff00f0Thông báo: #Y Server s¨ ðóng cØa trong 5 phút næa ð¬ tiªn hành bäo trì. Th¶i gian dñ kiªn là 15'. Mong các b¢ng hæu thông cäm.", playername)                                    
        BroadMsgByChatPipe(sceneId, selfId, strText, 4)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
       elseif GetNumText() == 666 then
       LuaFnSendSpecificImpactToUnit( sceneId, selfId, selfId, selfId, 2690, 0 )
       elseif GetNumText() == 777 then
       LuaFnSendSpecificImpactToUnit( sceneId, selfId, selfId, selfId, 740, 0 )
       elseif GetNumText() == 7 then
        BeginEvent( sceneId )
        local playername = GetName(sceneId, selfId)
        local strText = format("#b#cff00f0Thông báo:#Y Server ðóng cØa ð¬ bäo trì trong vài phút næa. Mong các bÕn quay lÕi sau !", playername)        
        local playername = GetName(sceneId, selfId)
        local strText = format("@*;SrvMsg;SCA:#b#cff00f0Thông báo:#Y Server ðóng cØa ð¬ bäo trì trong vài phút næa. Mong các bÕn quay lÕi sau !", playername)                                    
        BroadMsgByChatPipe(sceneId, selfId, strText, 4)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
    elseif GetNumText() == 8 then
        BeginEvent( sceneId )
        local playername = GetName(sceneId, selfId)
        local strText = format("#b#cff00f0#YCám ½n bÕn ðã üng hµ #GTLBB Thiên Hà. #YÐ¬ ðßþc h² trþ xin vui lòng liên h®  #b#G hotro.tlbbthienha #YM÷i thông báo l²i cüa các bÕn có th¬ gØi lên Trang Chü  #Gthienlongthienha.cu.cc.", playername)        
        local playername = GetName(sceneId, selfId)
        local strText = format("@*;SrvMsg;SCA:#b#cff00f0#YCám ½n bÕn ðã üng hµ #GTLBB Thiên Hà. #YÐ¬ ðßþc h² trþ xin vui lòng liên h®  #b#T hotro.tlbbthienha #YM÷i thông báo l²i cüa các bÕn có th¬ gØi lên di­n ðàn #Gthienlongthienha.cu.cc.", playername)                                    
        BroadMsgByChatPipe(sceneId, selfId, strText, 4)
        EndEvent(sceneId)
        DispatchEventList(sceneId,selfId,targetId)
    elseif GetNumText() == 9 then
          for i = 0,300 do
          TryRecieveItem( sceneId, selfId, 30505107, 1 )
               end

      end

end  